# progfigsite packages

Progfigsite packages are packages that define an inventory,
with nodes, groups, roles, and functions,
and depend on progfiguration core to apply them.

## progfigsite API

TODO: list API, pull from sitewrapper

## Building pacakges

Progfigsite packages can be in _whatever format you want_.
If your hosts are RHEL, you might build RPMs.
The original hosts that progfiguration was written for were Alpine Linux, and consumed APKs.
Your own site might use something else,
and it can define instructions for building packages in whatever format you need.

Progfiguration core does support building two package types itself:
pip packages, and zipapp packages.

### pip packages

TODO: pip packages not actually supported yet

Pip itself needs no introduction.
We keep the ability to build pip packages in progfiguration core,
rather than delegating it to progfigsite implementations,
for two reasons:

1.  It's universal.
    Any Python that can run progfiguration at all can install a progfigsite package via pip,
    including into a venv.
2.  It's the easiest way to build distribution-specific packages.
    RPMs can be built from Python build instructions,
    and so can APKs.

### zipapp packages

zipapp is a [feature of the Python standard library](https://docs.python.org/3/library/zipapp.html),
but it's less well-known.
In short, you can zip up any Python module and add a small `__main__.py`
and execute it with the default Python interpreter just as if it were a Python script written in UTF-8.
This method allows embedding dependencies as well.
All code executed this way must be pure Python code (no C extensions).
We use zipapp because:

1.  Building a zipapp package is _extremely_ fast
2.  It's deployable instantly to anywhere with a Python interpreter

You can build progfigsite packages with these two methods via `progfiguration build`,
and see the code in the `progfiguration.progfigbuild` package.
TODO: double-check CLI syntax and path location.

## Other package types

TODO: Include examples of building other package types like RPMs

TODO: Link to psyops progfigsite with APK example
